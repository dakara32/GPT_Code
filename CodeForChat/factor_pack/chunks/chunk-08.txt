```text
ckers.csv")
L627                   .iloc[:, 0]
L628                   .str.upper()
L629                   .tolist()
L630             )
L631         except FileNotFoundError:
L632             warnings.warn("current_tickers.csv not found â€” bonus skipped")
L633             current = []
L634
L635         mask_bonus = g_score.index.isin(current)
L636         if mask_bonus.any():
L637             # 1) factor.BONUS_COEFF ã‹ã‚‰ k ã‚’æ±ºã‚ã€ç„¡ã‘ã‚Œã° 0.4
L638             k = float(getattr(sys.modules.get("factor"), "BONUS_COEFF", 0.4))
L639             # 2) g å´ã® Ïƒ ã‚’å–ã‚Šã€NaN ãªã‚‰ 0 ã«ä¸¸ã‚ã‚‹
L640             sigma_g = g_score.std()
L641             if pd.isna(sigma_g):
L642                 sigma_g = 0.0
L643             bonus_g = round(k * sigma_g, 3)
L644             g_score.loc[mask_bonus] += bonus_g
L645             Scorer.g_score = g_score
L646             # 3) D å´ã‚‚åŒæ§˜ã« Ïƒ ã® NaN ã‚’ã‚±ã‚¢
L647             sigma_d = d_score_all.std()
L648             if pd.isna(sigma_d):
L649                 sigma_d = 0.0
L650             bonus_d = round(k * sigma_d, 3)
L651             d_score_all.loc[d_score_all.index.isin(current)] += bonus_d
L652
L653         try:
L654             df = _apply_growth_entry_flags(df, ib, self, win_breakout=5, win_pullback=5)
L655         except Exception:
L656             pass
L657
L658         from factor import FeatureBundle  # type: ignore  # å®Ÿè¡Œæ™‚importãªã—ï¼ˆå¾ªç’°å›é¿ï¼‰
L659         return FeatureBundle(
L660             df=df,
L661             df_z=df_z,
L662             g_score=g_score,
L663             d_score_all=d_score_all,
L664             missing_logs=pd.DataFrame(missing_logs)
L665         )
L666
L667
L668 def _apply_growth_entry_flags(feature_df, bundle, self_obj, win_breakout=5, win_pullback=5):
L669     """
L670     Gæ ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ã«å¯¾ã—ã€ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆç¢ºå®š/æŠ¼ã—ç›®åç™ºã®ã€Œç›´è¿‘Nå–¶æ¥­æ—¥å†…ã®ç™ºç«ã€ã‚’åˆ¤å®šã—ã€
L671     æ¬¡ã®åˆ—ã‚’ feature_df ã«è¿½åŠ ã™ã‚‹ï¼ˆindex=tickerï¼‰ã€‚
L672       - G_BREAKOUT_recent_5d : bool
L673       - G_BREAKOUT_last_date : str "YYYY-MM-DD"
L674       - G_PULLBACK_recent_5d : bool
L675       - G_PULLBACK_last_date : str "YYYY-MM-DD"
L676       - G_PIVOT_price        : float
L677     å¤±æ•—ã—ã¦ã‚‚ä¾‹å¤–ã¯æ¡ã‚Šæ½°ã—ã€æ—¢å­˜å‡¦ç†ã‚’é˜»å®³ã—ãªã„ã€‚
L678     """
L679     try:
L680         px   = bundle.px                      # çµ‚å€¤ DataFrame
L681         hi   = bundle.data['High']
L682         lo   = bundle.data['Low']
L683         vol  = bundle.data['Volume']
L684         bench= bundle.spx                     # ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ Series
L685
L686         # Gãƒ¦ãƒ‹ãƒãƒ¼ã‚¹æ¨å®šï¼šself.g_universe å„ªå…ˆ â†’ feature_df['group']=='G' â†’ å…¨éŠ˜æŸ„
L687         g_universe = getattr(self_obj, "g_universe", None)
L688         if g_universe is None:
L689             try:
L690                 g_universe = feature_df.index[feature_df['group'].astype(str).str.upper().eq('G')].tolist()
L691             except Exception:
L692                 g_universe = list(feature_df.index)
L693         if not g_universe:
L694             return feature_df
L695
L696         # æŒ‡æ¨™
L697         ema21 = px[g_universe].ewm(span=21, adjust=False).mean()
L698         ma50  = px[g_universe].rolling(50).mean()
L699         ma150 = px[g_universe].rolling(150).mean()
L700         ma200 = px[g_universe].rolling(200).mean()
L701         atr20 = (hi[g_universe] - lo[g_universe]).rolling(20).mean()
L702         vol20 = vol[g_universe].rolling(20).mean()
L703         vol50 = vol[g_universe].rolling(50).mean()
L704
L705         # ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆæ ¼
L706         trend_template_ok = (px[g_universe] > ma50) & (px[g_universe] > ma150) & (px[g_universe] > ma200) \
L707                             & (ma150 > ma200) & (ma200.diff() > 0)
L708
L709         # æ±ç”¨ãƒ”ãƒœãƒƒãƒˆï¼šç›´è¿‘65å–¶æ¥­æ—¥ã®é«˜å€¤ï¼ˆå½“æ—¥é™¤å¤–ï¼‰
L710         pivot_price = hi[g_universe].rolling(65).max().shift(1)
L711
L712         # ç›¸å¯¾åŠ›ï¼šå¹´å†…é«˜å€¤æ›´æ–°
L713         bench_aligned = bench.reindex(px.index).ffill()
L714         rs = px[g_universe].div(bench_aligned, axis=0)
L715         rs_high = rs.rolling(252).max().shift(1)
L716
L717         # ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã€Œç™ºç”Ÿæ—¥ã€ï¼šæ¡ä»¶ç«‹ã¡ä¸ŠãŒã‚Š
L718         breakout_today = trend_template_ok & (px[g_universe] > pivot_price) \
L719                          & (vol[g_universe] >= 1.5 * vol50) & (rs > rs_high)
L720         breakout_event = breakout_today & ~breakout_today.shift(1).fillna(False)
L721
L722         # æŠ¼ã—ç›®åç™ºã€Œç™ºç”Ÿæ—¥ã€ï¼šEMA21å¸¯Ã—å‡ºæ¥é«˜ãƒ‰ãƒ©ã‚¤ã‚¢ãƒƒãƒ—Ã—å‰æ—¥é«˜å€¤è¶ŠãˆÃ—çµ‚å€¤EMA21ä¸Š
L723         near_ema21_band = px[g_universe].between(ema21 - atr20, ema21 + atr20)
L724         volume_dryup = (vol20 / vol50) <= 1.0
L725         pullback_bounce_confirmed = (px[g_universe] > hi[g_universe].shift(1)) & (px[g_universe] > ema21)
L726         pullback_today = trend_template_ok & near_ema21_band & volume_dryup & pullback_bounce_confirmed
L727         pullback_event = pullback_today & ~pullback_today.shift(1).fillna(False)
L728
L729         # ç›´è¿‘Nå–¶æ¥­æ—¥å†…ã®ç™ºç« / æœ€çµ‚ç™ºç”Ÿæ—¥
L730         rows = []
L731         for t in g_universe:
L732             def _recent_and_date(s, win):
L733                 sw = s[t].iloc[-win:]
L734                 if sw.any():
L735                     d = sw[sw].index[-1]
L736                     return True, d.strftime("%Y-%m-%d")
L737                 return False, ""
L738             br_recent, br_date = _recent_and_date(breakout_event, win_breakout)
L739             pb_recent, pb_date = _recent_and_date(pullback_event, win_pullback)
L740             rows.append((t, {
L741                 "G_BREAKOUT_recent_5d": br_recent,
L742                 "G_BREAKOUT_last_date": br_date,
L743                 "G_PULLBACK_recent_5d": pb_recent,
L744                 "G_PULLBACK_last_date": pb_date,
L745                 "G_PIVOT_price": float(pivot_price[t].iloc[-1]) if t in pivot_price.columns else float('nan'),
L746             }))
L747         flags = pd.DataFrame({k: v for k, v in rows}).T
L748
L749         # åˆ—ã‚’ä½œæˆãƒ»ä¸Šæ›¸ã
L750         cols = ["G_BREAKOUT_recent_5d","G_BREAKOUT_last_date","G_PULLBACK_recent_5d","G_PULLBACK_last_date","G_PIVOT_price"]
L751         for c in cols:
L752             if c not in feature_df.columns:
L753                 feature_df[c] = np.nan
L754         feature_df.loc[flags.index, flags.columns] = flags
L755
L756     except Exception:
L757         pass
L758     return feature_df
L759
L760
L761
```

## <.github/workflows/weekly-report.yml>
```text
L1 name: Weekly Stock Report
L2
L3 on:
L4   push:
L5     branches: [ main ]
L6     paths-ignore:
L7       - 'CodeForChat/**'
L8   schedule:
L9     - cron: '0 0 * * 6'  # UTC 00:00 â†’ JST 09:00ï¼ˆåœŸï¼‰
L10   workflow_dispatch:
L11
L12 jobs:
L13   build-and-report:
L14     runs-on: ubuntu-latest
L15
L16     steps:
L17       - name: Debug start
L18         run: echo 'ğŸš€ DEBUGstarted'
L19               
L20       - name: Checkout repository
L21         uses: actions/checkout@v3
L22
L23       - name: Setup Python
L24         uses: actions/setup-python@v5
L25         with:
L26           python-version: '3.x'                # ï¼ˆå¿…è¦æœ€å°é™ã®ã¾ã¾ã€‚å›ºå®šã—ãŸã‘ã‚Œã° '3.13'ï¼‰
L27           cache: 'pip'                         # â˜… pipã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–
L28           cache-dependency-path: requirements.txt  # â˜… ä¾å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã«
L29
L30       - name: Install dependencies
L31         run: pip install -r requirements.txt
L32
L33       - name: Prepare results directory
L34         run: mkdir -p results
L35
L36       - name: Run factor & scoring
L37         env:
L38           SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
L39           FINNHUB_API_KEY: ${{ secrets.FINNHUB_API_KEY }}
L40           FIN_THREADS: "8"
L41         run: python factor.py
```

## <documents/README.md>
```text
L1 # é‹ç”¨ãƒ«ãƒ¼ãƒ«
L2
L3 ## åŸºæœ¬æ§‹æˆ
L4 - 25éŠ˜æŸ„ã‚’å‡ç­‰é…åˆ†ï¼ˆç¾é‡‘ã‚’é™¤ã1éŠ˜æŸ„ã‚ãŸã‚Š4%ï¼‰
L5 - moomooè¨¼åˆ¸ã§é‹ç”¨
L6
L7 ## Barbell Growth-Defenseæ–¹é‡
L8 - Growthæ 12éŠ˜æŸ„ï¼šé«˜æˆé•·ã§ä¹–é›¢æºã¨ãªã‚‹æ”»ã‚ã®éŠ˜æŸ„
L9 - Defenseæ 13éŠ˜æŸ„ï¼šä½ãƒœãƒ©ã§å®‰å®šæˆé•·ã—é…å½“ã‚’å¢—ã‚„ã™å®ˆã‚Šã®éŠ˜æŸ„
L10 - ã€ŒçŒ›çƒˆã«ä¼¸ã³ã‚‹æ”»ã‚ Ã— ç€å®Ÿã«ç¨¼ãç›¾ã€ã®çµ„åˆã›ã§ä¹–é›¢â†’åŠæˆ»ã—ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚’ç‹™ã†
L11
L12 ## ç¾é‡‘æ¯”ç‡ï¼ˆVIX 5æ—¥ç§»å‹•å¹³å‡ã§åˆ¤å®šï¼‰
L13 - VIX MA5 < 20: 5%
L14 - 20 â‰¤ VIX MA5 < 26: 7.5%
L15 - VIX MA5 â‰¥ 27: 12%ï¼ˆé«˜VIXç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ï¼‰
L16
L17 ## ãƒ‰ãƒªãƒ•ãƒˆé–¾å€¤
L18 - VIX MA5 < 20: 10%
L19 - 20 â‰¤ VIX MA5 < 26: 12%
L20 - VIX MA5 â‰¥ 27: é«˜VIXç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ã¸ç§»è¡Œ
L21
L22 ## é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®é‹ç”¨
L23 - æ¯å–¶æ¥­æ—¥ã€â‘ 90æ—¥çµŒé or â‘¡ãƒ‰ãƒªãƒ•ãƒˆãŒé–¾å€¤è¶…éã§åŠæˆ»ã—
L24 - åŠæˆ»ã—ï¼šä¹–é›¢ã®50%ã‚’ä¸­å¤®ã¸å¯„ã›ã€ç¾é‡‘æ¯”ç‡ã‚’ä¸Šè¡¨ã©ãŠã‚Šã«èª¿æ•´
L25 - å…¨éŠ˜æŸ„ã®ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ—(TS)ã‚’å†è¨­å®š
L26 - ãƒ‰ãƒªãƒ•ãƒˆï¼Î£|ç¾åœ¨æ¯”ç‡âˆ’4%|ï¼ˆç«¯æ•°åˆ‡ã‚Šæ¨ã¦ï¼‰
L27
L28 ## é«˜VIXç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ï¼ˆMA5 > 27ã§ç™ºå‹•ï¼‰
L29 1. å…¨25éŠ˜æŸ„ã‚’å„4%ã¸å…¨æˆ»ã—
L30 2. ç¾é‡‘æ¯”ç‡12%ã¸å¼•ä¸Šã’
L31 3. å…¨éŠ˜æŸ„ã®TSã‚’å†è¨­å®šã—ä»¥é™ã®å£²è²·ã¨ãƒ‰ãƒªãƒ•ãƒˆè¨ˆç®—ã‚’åœæ­¢
L32
L33 ## é«˜VIXç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ã®è§£é™¤
L34 - MA5 < 23 ã¾ãŸã¯30å–¶æ¥­æ—¥çµŒéã§è§£é™¤
L35 - ç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ä¸­ã«TSç™ºå‹•ã§æ¸›å°‘ã—ãŸéŠ˜æŸ„ã‚’è£œå……ã—25éŠ˜æŸ„Ã—4%ã«ãƒªãƒãƒ©ãƒ³ã‚¹
L36 - é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®æ—¥æ¬¡ãƒã‚§ãƒƒã‚¯ã‚’å†é–‹
L37
L38 ## æ®µéšçš„ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ—
L39 - Growth: åŸºæœ¬25%
L40 - Defense: åŸºæœ¬20%
L41 - å«ã¿ç›ŠãŒ40/60/80%ã«é”ã—ãŸã‚‰TSã‚’3/5/8ãƒã‚¤ãƒ³ãƒˆãšã¤å¼•ãä¸Šã’
L42 - TSç™ºå‹•ã§æ¸›å°‘ã—ãŸéŠ˜æŸ„ã¯ç¿Œæ—¥ä»¥é™ã«è£œå……ï¼ˆç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰ä¸­ã¯è£œå……ã—ãªã„ï¼‰
L43
L44 ## å…¥æ›¿éŠ˜æŸ„é¸å®š
L45 - Oxfordã‚­ãƒ£ãƒ”ã‚¿ãƒ«ï¼ã‚¤ãƒ³ã‚«ãƒ ã€Alpha Investorã€Motley Fool Stock Advisorã€moomooã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ç­‰ã‚’å‚è€ƒã«chatGPTã§æ¤œè¨
L46 - å¹´é–“NISAæ ã¯Growthç¾¤ã®ä¸­ã‹ã‚‰ä½ãƒœãƒ©éŠ˜æŸ„ã‚’é¸å®šã—åˆ©ç”¨ã€‚é•·æœŸä¿æŒã«ã¯ã“ã ã‚ã‚‰ãªã„ã€‚
L47
L48 ## å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°
L49 - åˆ¤å®šï¼šç±³å›½å¸‚å ´çµ‚å€¤ç›´å¾Œ
L50 - åŸ·è¡Œï¼šç¿Œå–¶æ¥­æ—¥ã®ç±³å›½å¯„ä»˜ãæˆè¡Œ
L51
L52 ## VIXæ—©è¦‹è¡¨
L53 | VIX MA5 | ãƒ‰ãƒªãƒ•ãƒˆé–¾å€¤ | ç¾é‡‘æ¯”ç‡ | ãƒ¢ãƒ¼ãƒ‰ |
L54 |--------|--------------|---------|-------|
L55 | <20    | 10           | 5%      | é€šå¸¸ |
L56 | 20â€“26  | 12           | 7.5%    | é€šå¸¸ |
L57 | â‰¥27    | â€“            | 12%     | é«˜VIXç·Šæ€¥ |
```

## <documents/factor_design.md>
```text
L1 # factor.py è©³ç´°è¨­è¨ˆæ›¸
L2
L3 ## æ¦‚è¦
L4 - æ—¢å­˜ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®éŠ˜æŸ„ã¨æ¤œè¨ä¸­ã®éŠ˜æŸ„ç¾¤ã‚’åŒæ™‚ã«æ‰±ã†éŠ˜æŸ„é¸å®šãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€‚
L5 - ä¾¡æ ¼ãƒ»è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã¿ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã¨DRRSé¸å®šã‚’è¡Œã†ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å¾—ã‚‹ã€‚
L6   - æ¡ç”¨éŠ˜æŸ„ã¨æƒœã—ãã‚‚æ¼ã‚ŒãŸéŠ˜æŸ„ã®ã‚¹ã‚³ã‚¢ä¸€è¦§
L7   - IN/OUTã®ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãƒªã‚¹ãƒˆã¨OUTå´ã®ä½ã‚¹ã‚³ã‚¢éŠ˜æŸ„
L8   - æ–°æ—§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®æ¯”è¼ƒè¡¨
L9   - æ¤œè¨ä¸­éŠ˜æŸ„ã®ä½ã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆæ•´ç†ç”¨ï¼‰
L10
L11 ## å…¨ä½“ãƒ•ãƒ­ãƒ¼
L12 1. **Input** â€“ `current_tickers.csv`ã¨`candidate_tickers.csv`ã‚’èª­ã¿è¾¼ã¿ã€yfinanceã‚„Finnhubã®APIã‹ã‚‰ä¾¡æ ¼ãƒ»è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¦`InputBundle`ã‚’æ•´å‚™ã€‚
L13 2. **Score Calculation** â€“ ScorerãŒç‰¹å¾´é‡ã‚’è¨ˆç®—ã—å› å­ã‚¹ã‚³ã‚¢ã‚’åˆæˆã—ã¦`FeatureBundle`ã‚’ç”Ÿæˆã€‚
L14 3. **Correlation Reduction & Selection** â€“ SelectorãŒDRRSãƒ­ã‚¸ãƒƒã‚¯ã§ç›¸é–¢ã‚’æŠ‘ãˆã¤ã¤G/DéŠ˜æŸ„ã‚’é¸å®šã—`SelectionBundle`ã‚’å¾—ã‚‹ã€‚
L15 4. **Output** â€“ æ¡ç”¨çµæœã¨å‘¨è¾ºæƒ…å ±ã‚’è¡¨ãƒ»Slacké€šçŸ¥ã¨ã—ã¦å‡ºåŠ›ã€‚
L16
L17 ```mermaid
L18 flowchart LR
L19   A[Input\nAPI & å‰å‡¦ç†] --> B[Score Calculation\nç‰¹å¾´é‡ãƒ»å› å­åˆæˆ]
L20   B --> C[Correlation Reduction\nDRRSé¸å®š]
L21   C --> D[Output\nSlacké€šçŸ¥]
L22 ```
L23
L24 ## å®šæ•°ãƒ»è¨­å®š
L25 | å¤‰æ•° | å†…å®¹ | ä¸»ãªç”¨é€” |
L26 | --- | --- | --- |
L27 | `exist` / `cand` | ç¾è¡Œãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¨æ¤œè¨ä¸­éŠ˜æŸ„ã®ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãƒªã‚¹ãƒˆ | ã‚¹ã‚³ã‚¢å¯¾è±¡ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ã®æ§‹æˆã€å€™è£œæ•´ç† |
L28 | `bench` | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚£ãƒƒã‚«ãƒ¼ | ç›¸å¯¾å¼·ã•ãƒ»Î²ç®—å‡ºã€ãƒãƒ¼ãƒˆæ¯”è¼ƒ |
L29 | `CAND_PRICE_MAX` | å€™è£œéŠ˜æŸ„ã®è¨±å®¹ä¾¡æ ¼ä¸Šé™ | é«˜é¡éŠ˜æŸ„ã®äº‹å‰é™¤å¤– |
L30 | `N_G` / `N_D` | G/Dæ¡ç”¨æ ã®ä»¶æ•° | æœ€çµ‚çš„ã«é¸ã¶éŠ˜æŸ„æ•°ã®åˆ¶ç´„ |
L31 | `g_weights` / `D_weights` | å„å› å­ã®é‡ã¿dict | G/Dã‚¹ã‚³ã‚¢åˆæˆ |
L32 | `D_BETA_MAX` | Dãƒã‚±ãƒƒãƒˆã®è¨±å®¹Î²ä¸Šé™ | é«˜Î²éŠ˜æŸ„ã®é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿ |
L33 | `FILTER_SPEC` | G/Dã”ã¨ã®å‰å‡¦ç†ãƒ•ã‚£ãƒ«ã‚¿ | ãƒˆãƒ¬ãƒ³ãƒ‰ãƒã‚¹ã‚¯ã‚„Î²ä¸Šé™è¨­å®š |
L34 | `corrM` | DRRSåˆæœŸãƒ—ãƒ¼ãƒ«ã®æœ€å¤§ä»¶æ•° | ç›¸é–¢è¡Œåˆ—ã‚µã‚¤ã‚ºåˆ¶å¾¡ |
L35 | `DRRS_G` / `DRRS_D` | DRRSãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿dict | ãƒã‚±ãƒƒãƒˆåˆ¥ã®ç›¸é–¢ä½æ¸›è¨­å®š |
L36 | `DRRS_SHRINK` | æ®‹å·®ç›¸é–¢ã®å¯¾è§’ã‚·ãƒ¥ãƒªãƒ³ã‚¯ç‡ | `residual_corr`ã®å®‰å®šåŒ– |
L37 | `CROSS_MU_GD` | G-Dé–“ã‚¯ãƒ­ã‚¹ç›¸é–¢ãƒšãƒŠãƒ«ãƒ†ã‚£Î¼ | 2ãƒã‚±ãƒƒãƒˆåŒæ™‚æœ€é©åŒ–ã§ç›¸é–¢æŠ‘åˆ¶ |
L38 | `RESULTS_DIR` | é¸å®šçµæœä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | `_save_sel`/`_load_prev`ã®å…¥å‡ºåŠ› |
L39
L40 é¸å®šçµæœã¯`results/`é…ä¸‹ã«JSONã¨ã—ã¦ä¿å­˜ã—ã€æ¬¡å›å®Ÿè¡Œæ™‚ã«`_load_prev`ã§èª­ã¿è¾¼ã‚“ã§é¸å®šæ¡ä»¶ã«åæ˜ ã€‚
L41
L42 ## DTO/Config
L43 å„ã‚¹ãƒ†ãƒƒãƒ—é–“ã§å—ã‘æ¸¡ã™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨è¨­å®šå€¤ã€‚å¤‰æ•°ã®æ„å‘³åˆã„ã¨åˆ©ç”¨ç®‡æ‰€ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚
L44
L45 ### InputBundleï¼ˆInput â†’ Scorerï¼‰
L46 | å¤‰æ•° | å†…å®¹ | ä¸»ãªç”¨é€” |
L47 | --- | --- | --- |
L48 | `cand` | å€™è£œéŠ˜æŸ„ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã®ãƒªã‚¹ãƒˆ | OUTãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ä½ã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°å¯¾è±¡ã®æ¯é›†å›£ |
L49 | `tickers` | ç¾è¡Œ+å€™è£œã‚’åˆã‚ã›ãŸãƒ†ã‚£ãƒƒã‚«ãƒ¼ä¸€è¦§ | ä¾¡æ ¼ãƒ»å‡ºæ¥é«˜ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ãƒªã‚¿ãƒ¼ãƒ³è¨ˆç®— |
L50 | `bench` | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚£ãƒƒã‚«ãƒ¼ | ç›¸å¯¾å¼·ã•ãƒ»Î²ç®—å‡ºã€ãƒãƒ¼ãƒˆæ¯”è¼ƒ |
L51 | `data` | yfinanceã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰çµæœï¼ˆéšå±¤åˆ—ï¼‰ | `px`/`spx`/ãƒªã‚¿ãƒ¼ãƒ³ç­‰ã®åŸºç¤ãƒ‡ãƒ¼ã‚¿ |
L52 | `px` | `data['Close']`ã ã‘ã‚’æŠœãå‡ºã—ãŸä¾¡æ ¼ç³»åˆ— | æŒ‡æ¨™è¨ˆç®—ãƒ»ãƒªã‚¿ãƒ¼ãƒ³ç”Ÿæˆ |
L53 | `spx` | `data['Close'][bench]` ã®Series | `rs`ã‚„`calc_beta`ã®åŸºæº–æŒ‡æ•° |
L54 | `tickers_bulk` | `yf.Tickers`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ | `info`ç­‰ã®ä¸€æ‹¬å–å¾— |
L55 | `info` | ãƒ†ã‚£ãƒƒã‚«ãƒ¼åˆ¥ã®yfinanceæƒ…å ±dict | ã‚»ã‚¯ã‚¿ãƒ¼åˆ¤å®šã‚„EPSè£œå®Œ |
L56 | `eps_df` | EPS TTM/ç›´è¿‘EPSç­‰ã‚’ã¾ã¨ã‚ãŸè¡¨ | æˆé•·æŒ‡æ¨™ã®ç®—å‡º |
L57 | `fcf_df` | CFOãƒ»CapExãƒ»FCF TTMã¨æƒ…å ±æºãƒ•ãƒ©ã‚° | FCF/EVã‚„é…å½“ã‚«ãƒãƒ¬ãƒƒã‚¸ |
L58 | `returns` | `px.pct_change()`ã®ãƒªã‚¿ãƒ¼ãƒ³è¡¨ | ç›¸é–¢è¡Œåˆ—ãƒ»DRRSè¨ˆç®— |
L59
L60 ### FeatureBundleï¼ˆScorer â†’ Selectorï¼‰
L61 | å¤‰æ•° | å†…å®¹ | ä¸»ãªç”¨é€” |
L62 | --- | --- | --- |
L63 | `df` | è¨ˆç®—æ¸ˆã¿æŒ‡æ¨™ã®ç”Ÿå€¤ãƒ†ãƒ¼ãƒ–ãƒ« | ãƒ‡ãƒãƒƒã‚°ãƒ»å‡ºåŠ›è¡¨ç¤º |
L64 | `df_z` | ã‚¦ã‚£ãƒ³ã‚¶ãƒ¼å¾ŒZã‚¹ã‚³ã‚¢åŒ–ã—ãŸæŒ‡æ¨™è¡¨ | å› å­ã‚¹ã‚³ã‚¢åˆæˆã€é¸å®šåŸºæº– |
L65 | `g_score` | Gãƒã‚±ãƒƒãƒˆç·åˆã‚¹ã‚³ã‚¢ | Gé¸å®šã€IN/OUTæ¯”è¼ƒ |
L66 | `d_score_all` | Dãƒã‚±ãƒƒãƒˆç·åˆã‚¹ã‚³ã‚¢ï¼ˆå…¨éŠ˜æŸ„ï¼‰ | Dé¸å®šã€ä½ã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚­ãƒ³ã‚° |
L67 | `missing_logs` | æ¬ ææŒ‡æ¨™ã¨è£œå®ŒçŠ¶æ³ã®ãƒ­ã‚° | ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ |
L68
L69 ### SelectionBundleï¼ˆSelector â†’ Outputï¼‰
L70 | å¤‰æ•° | å†…å®¹ | ä¸»ãªç”¨é€” |
L71 | --- | --- | --- |
L72 | `resG` | Gé¸å®šçµæœã®è©³ç´°dictï¼ˆ`tickers`ã€ç›®çš„å€¤ç­‰ï¼‰ | çµæœä¿å­˜ãƒ»å¹³å‡ç›¸é–¢ãªã©ã®æŒ‡æ¨™è¡¨ç¤º |
L73 | `resD` | Dé¸å®šçµæœã®è©³ç´°dict | åŒä¸Š |
L74 | `top_G` | æœ€çµ‚æ¡ç”¨Gãƒ†ã‚£ãƒƒã‚«ãƒ¼ | æ–°ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹ç¯‰ |
L75 | `top_D` | æœ€çµ‚æ¡ç”¨Dãƒ†ã‚£ãƒƒã‚«ãƒ¼ | åŒä¸Š |
L76 | `init_G` | DRRSå‰ã®GåˆæœŸå€™è£œ | æƒœã—ãã‚‚å¤–ã‚ŒãŸéŠ˜æŸ„è¡¨ç¤º |
L77 | `init_D` | DRRSå‰ã®DåˆæœŸå€™è£œ | åŒä¸Š |
L78
L79 ### WeightsConfig
L80 | å¤‰æ•° | å†…å®¹ | ä¸»ãªç”¨é€” |
L81 | --- | --- | --- |
L82 | `g` | Gå› å­ï¼ˆGRW/MOM
```